<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Cloud Storage</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">Home Cloud</div>
            
            <div class="sidebar-nav">
                <div class="nav-item active" data-folder="">
                    <svg fill="currentColor" viewBox="0 0 20 20"><path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/></svg>
                    My Files
                </div>
                <div class="nav-item" data-folder="Pictures">
                    <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/></svg>
                    Pictures
                </div>
                <div class="nav-item" data-folder="Videos">
                    <svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"/></svg>
                    Videos
                </div>
                <div class="nav-item" data-folder="Documents">
                    <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"/></svg>
                    Documents
                </div>
                <div class="nav-item" data-folder="Downloads">
                    <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
                    Downloads
                </div>
            </div>
            
            <!-- User Info Section -->
            <div class="sidebar-footer">
                <div class="user-info-container">
                    <div class="user-avatar">{{ username[0].upper() }}</div>
                    <div class="user-details">
                        <div class="user-name">{{ username }}</div>
                        <a href="/logout" class="logout-link">Logout</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="top-bar">
                <div class="breadcrumb" id="breadcrumb">My Files</div>
                <div style="display: flex; gap: 10px;">
                    <button class="new-folder-btn" onclick="showNewFolderModal()">
                        <svg fill="currentColor" viewBox="0 0 20 20" width="16" height="16"><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/></svg>
                        New Folder
                    </button>
                    <button class="upload-btn" onclick="showUploadModal()">
                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/></svg>
                        Upload File
                    </button>
                </div>
            </div>
            
            <div class="file-area">
                <table class="file-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Modified</th>
                            <th>Size</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="filesList">
                        <tr>
                            <td colspan="4">
                                <div class="empty-state">
                                    <svg fill="currentColor" viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/></svg>
                                    <p>Loading files...</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- Upload Modal -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">Upload Files</div>
            <div class="form-group">
                <label>Select Files or Folder</label>
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()" style="flex: 1;">
                        üìÑ Choose Files
                    </button>
                    <button class="btn btn-secondary" onclick="document.getElementById('folderInput').click()" style="flex: 1;">
                        üìÅ Choose Folder
                    </button>
                </div>
                <input type="file" id="fileInput" multiple style="display: none;">
                <input type="file" id="folderInput" webkitdirectory directory multiple style="display: none;">
                <div id="selectedFilesInfo" style="max-height: 200px; overflow-y: auto; padding: 10px; background: #f5f5f5; border-radius: 6px; font-size: 13px;"></div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeUploadModal()">Cancel</button>
                <button class="btn btn-primary" id="uploadBtn" onclick="uploadFiles()">Upload</button>
            </div>
        </div>
    </div>
    
    <!-- New Folder Modal -->
    <div class="modal" id="newFolderModal">
        <div class="modal-content">
            <div class="modal-header">Create New Folder</div>
            <div class="form-group">
                <label>Folder Name</label>
                <input type="text" id="folderNameInput" placeholder="Enter folder name">
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeNewFolderModal()">Cancel</button>
                <button class="btn btn-primary" onclick="createFolder()">Create</button>
            </div>
        </div>
    </div>
    
    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" onclick="downloadItem()">Download</div>
        <div class="context-menu-item danger" onclick="deleteItem()">Delete</div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <span id="notificationText"></span>
    </div>

    <!-- Load JavaScript -->
    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
